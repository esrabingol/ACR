@{
	ViewData["Title"] = "Statistics";
	Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<title>İstatislikler</title>
	<link href="~/admin/dist/css/styles.css" rel="stylesheet" />

</head>
<body class="sb-nav-fixed">
	<nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
		<a class="navbar-brand" href="@Url.Action("Index","Admin")">Kontrol Paneli</a>
		<button class="btn btn-link btn-sm order-1 order-lg-0" id="sidebarToggle" href="#"><i class="fas fa-bars"></i></button>
	</nav>
	<main>
		<div class="container-fluid">
			<h1 class="mt-4">İstatislikler</h1>
			<ol class="breadcrumb mb-4">
				<li class="breadcrumb-item"><a href="@Url.Action("Index","Admin")">Kontrol Paneli</a></li>
				<li class="breadcrumb-item active">Grafikler</li>
			</ol>

			<div class="card mb-4">
				<div class="card-header">
					<i class="fas fa-chart-area mr-1"></i>
					Rezervasyon Sayısı Alan Grafiği
				</div>
				<div class="card-body"><canvas id="myAreaChart" width="100%" height="30"></canvas></div>
			</div>
			<div class="row">
				<div class="col-lg-6">
					<div class="card mb-4">
						<div class="card-header">
							<i class="fas fa-chart-bar mr-1"></i>
							Rezervasyon Sayısı Çubuk Grafiği
						</div>
						<div class="card-body"><canvas id="myBarChart" width="100%" height="50"></canvas></div>
					</div>
				</div>
				<div class="col-lg-6">
					<div class="card mb-4">
						<div class="card-header">
							<i class="fas fa-chart-pie mr-1"></i>
							Kullanıcı Sayısı Pasta Grafiği
						</div>
						<div class="card-body"><canvas id="myPieChart" width="100%" height="50"></canvas></div>
					</div>
				</div>
			</div>
		</div>
	</main>
	<script src="~/admin/dist/js/scripts.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>


	<script>
		var labels = [];
		var data = [];

		@foreach (var item in ViewBag.ReservationCountsByMonth)
		{
			<text>
				labels.push('@item.Month');
			data.push('@item.ReservationCount');
			</text>
		}

					var ctx = document.getElementById("myBarChart").getContext('2d');
		var myBarChart = new Chart(ctx, {
			type: 'bar',
			data: {
				labels: labels,
				datasets: [{
					label: "Rezervasyon Sayısı",
					backgroundColor: 'rgba(0, 51, 102, 1)',
					borderColor: 'rgba(0, 51, 102,1)',
					data: data,
				}],
			},
			options: {
				scales: {
					yAxes: [{
						ticks: {
							beginAtZero: true
						}
					}]
				}
			}
		});
	</script>
	<script>
		// Area Chart Example
		var labels = [];
		var data = [];

		@foreach (var item in ViewBag.ReservationCountsByMonth)
		{
			<text>
				labels.push('@item.Month');
			data.push('@item.ReservationCount');
			</text>
		}

		var ctx = document.getElementById("myAreaChart");
		var myLineChart = new Chart(ctx, {
			type: 'line',
			data: {
				labels: labels,
				datasets: [{
					label: "Rezervasyon Sayısı",
					lineTension: 0.3,
					backgroundColor: "rgba(2,117,216,0.2)",
					borderColor: "rgba(2,117,216,1)",
					pointRadius: 5,
					pointBackgroundColor: "rgba(2,117,216,1)",
					pointBorderColor: "rgba(255,255,255,0.8)",
					pointHoverRadius: 5,
					pointHoverBackgroundColor: "rgba(2,117,216,1)",
					pointHitRadius: 50,
					pointBorderWidth: 2,
					data: data,
				}],
			},
			options: {
				scales: {
					xAxes: [{
						time: {
							unit: 'date'
						},
						gridLines: {
							display: false
						},
						ticks: {
							maxTicksLimit: 7
						}
					}],
					yAxes: [{
						ticks: {
							min: 0,
							max: 20,
							maxTicksLimit: 10
						},
						gridLines: {
							color: "rgba(0, 0, 0, .125)",
						}
					}],
				},
				legend: {
					display: false
				}
			}
		});

	</script>
	<script>
		var ctx = document.getElementById("myPieChart").getContext('2d');
		var myPieChart = new Chart(ctx, {
			type: 'pie',
			data: {
				labels: ["Üretim Mühendisi", "Operatör"],
				datasets: [{
					data: [@ViewBag?.OperatorCount, @ViewBag?.EngineerCount],
					backgroundColor: [
						'rgba(204, 0, 0, 0.8)',  
						'rgba(0, 51, 102, 0.8)'
					],
				}],
			},
		});
	</script>

</body>
</html>


